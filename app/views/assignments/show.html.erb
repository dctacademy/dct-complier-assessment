<% @a = current_user.answers.map{|n| n.id} %>
<div class="col-md-12">
<p>
  <strong>Tags:</strong>
  <%= @assignment.try(:tag_list) %>
</p>

<p>
  <strong>Code:</strong>
  <%= @assignment.code %>
</p>

<p>
  <strong>Title:</strong>
  <%= @assignment.title %>
</p>

<p>
  <strong>Minutes:</strong>
  <%= @assignment.minutes %>
</p>

<p>
  <strong>Points:</strong>
  <%= @assignment.points %>
</p>

<p>
  <strong>Body:</strong>
  <%= raw(@assignment.body) %>
</p>

<p>
  <strong>Url:</strong>
  <%= @assignment.url %>
</p>

<% if can? :update, @assignment %>
  <% if !@assignment.approved %> 
    <%= link_to "Approve", assignments_approve_assignment_path(assignment_id: @assignment.id), remote: true, class: "btn btn-success btn-sm", id: "approve-assignment" %> 
  <% end %>
  <%= link_to 'Edit', edit_assignment_path(@assignment) %> |
<% end %>

<%= link_to 'Back', assignments_path %>

</div>

<% if can? :create,Answer %>
  <% if @rb.size == 3 && @js.size == 3 && @py.size == 3 %>
    <p>Solutions are already given for this question solve something else.</p>
  <%  else %>
    <%= render '/home/aindex' %>
    <% end %>
<% end %>

<script type="text/javascript">
  $(document).ready(function(){
    $("#fav").on('change',function(){
      if($(this).is(':checked')){
        var favourites = {}
        favourites["favourites"] = {}
        favourites["favourites"]["user_id"] = "<%= current_user.id %>"
        favourites["favourites"]["assignment_id"] = "<%= @assignment.id %>"
        $.ajax({
          url: '/favourites',
          type: 'post',
          data: favourites,
          success: function(response){
            swal(
              'success'
            )
          }
        });
      }else{
        $.ajax({
          url: '/favourites',
          type: 'delete',
          data: {
            user_id: "<%= current_user.id %>",
            assignment_id: "<%= @assignment.id %>"
          },
          success: function(response){
            swal(
              'success'
            )
          }
        });
      }
    });
  });
</script>
