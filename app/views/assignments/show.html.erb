<% @a = current_user.answers.map{|n| n.id} %>
<div class="col-md-4 pull-right compiler-question">
  <!-- <div class="row question-padding"> -->
    <!-- <span class="right">Favourite</span> -->
  <!-- </div> -->

  <div class="row question-padding">
    <p>
      <strong>Tags:</strong>
      <%= @assignment.try(:tag_list) %>
      <%= @assignment.try(:company_list) %>
      <input type="checkbox" name="favourite" class="glyphicon glyphicon-heart heart-icon pull-right" data-toggle="tooltip" title="Favourite" id="fav" "<%= '/checked/' if !@flag.nil? %>"></input>
    </p>
    <p>
      <strong>Title:</strong>
      <%= @assignment.title %>
    </p>

    <p>
      <strong>Body:</strong>
      <%= raw(@assignment.body) %>
    </p>

    <p>
      <strong>Url:</strong>
      <%= @assignment.url %>
    </p>
</div>

<div class="row pull-right question-padding">
  <% if can? :update, @assignment %>
  <%= link_to 'Edit', edit_assignment_path(@assignment) , class: "btn btn-info btn-small"%>
  <% end %>

  <%= link_to 'Back', assignments_path , class: "btn btn-primary btn-small"%>
</div>



</div>

<% if can? :create,Answer %>
  <% if @rb.size == 3 && @js.size == 3 && @py.size == 3 %>
    <p>Solutions are already given for this question solve something else.</p>
  <%  else %>
    <%= render '/home/aindex' %>
    <% end %>
<% end %>

<script type="text/javascript">
  $(document).ready(function(){
    $("#fav").on('change',function(){
      if($(this).is(':checked')){
        var favourites = {}
        favourites["favourites"] = {}
        favourites["favourites"]["user_id"] = "<%= current_user.id %>"
        favourites["favourites"]["assignment_id"] = "<%= @assignment.id %>"
        $.ajax({
          url: '/favourites',
          type: 'post',
          data: favourites,
          success: function(response){
            swal(
              'success'
            )
          }
        });
      }else{
        $.ajax({
          url: '/favourites',
          type: 'delete',
          data: {
            user_id: "<%= current_user.id %>",
            assignment_id: "<%= @assignment.id %>"
          },
          success: function(response){
            swal(
              'success'
            )
          }
        });
      }
    });
  });
</script>
